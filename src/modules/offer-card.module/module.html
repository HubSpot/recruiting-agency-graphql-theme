{# Module styles #}

<style>
{% scope_css %}

  /* Icon */

  {% if module.styles.icon.alignment.alignment.horizontal_align %}
    .offer-card__icon-wrapper {
      text-align: {{ module.styles.icon.alignment.alignment.horizontal_align }};
    }
  {% endif %}

  .offer-card__icon {
    {% if module.styles.icon.background.color.color %}
      background-color: rgba({{ module.styles.icon.background.color.color|convert_rgb }}, {{ module.styles.icon.background.color.opacity / 100 }});
    {% endif %}
    {% if module.styles.icon.corner.radius %}
      border-radius: {{ module.styles.icon.corner.radius ~ 'px' }};
    {% endif %}
    {{ module.styles.icon.spacing.spacing.css }}
  }

  .offer-card__icon svg {
    {% if module.styles.icon.fill.color.color %}
      fill: {{ module.styles.icon.fill.color.color }};
    {% endif %}
    {% if module.styles.icon.size.size %}
      height: {{ module.styles.icon.size.size ~ 'px' }};
      width: {{ module.styles.icon.size.size ~ 'px' }};
    {% endif %}
  }

  /* Content */

  {% if module.styles.content.alignment.alignment.text_align %}
    .offer-card__content {
      text-align: {{ module.styles.content.alignment.alignment.text_align }};
    }
  {% endif %}

  /* Button */

  {% if module.styles.button.alignment.alignment %}
    .offer-card__button-wrapper {
      text-align: {{ module.styles.button.alignment.alignment.horizontal_align }};
    }
  {% endif %}

  .button {
    {% if module.styles.button.background.color.color %}
      background-color: rgba({{ module.styles.button.background.color.color|convert_rgb }}, {{ module.styles.button.background.color.opacity / 100 }});
    {% endif %}
    {{ module.styles.button.border.border.css }}
    {% if module.styles.button.corner.radius %}
      border-radius: {{ module.styles.button.corner.radius ~ 'px' }};
    {% endif %}
    {% if module.styles.button.text.font.color %}
      color: {{ module.styles.button.text.font.color }};
    {% endif %}
    {% if module.styles.button.text.font.size %}
      font-size: {{ module.styles.button.text.font.size ~ module.styles.button.text.font.size_unit }};
    {% endif %}
    {% if module.styles.button.text.font.style %}
      {{ module.styles.button.text.font.style }};
    {% endif %}
    {{ module.styles.button.spacing.spacing.css }}
    {% if module.styles.button.text.transform %}
      text-transform: {{ module.styles.button.text.transform }};
    {% endif %}
  }

  {% if module.add_icon && module.icon.icon && module.styles.button.text.font.color %}
    .button svg {
      fill: {{ module.styles.button.text.font.color }};
    }
  {% endif %}

  .button:hover,
  .button:focus {
    {{ module.styles.button.hover.border.border.css }}
    {% if module.styles.button.hover.text.font.color %}
      color: {{ module.styles.button.hover.text.font.color }};
    {% endif %}
    {% if module.styles.button.hover.text.font.size %}
      font-size: {{ module.styles.button.hover.text.font.size ~ module.styles.button.hover.text.font.size_unit }};
    {% endif %}
    {% if module.styles.button.hover.text.font.style %}
      {{ module.styles.button.hover.text.font.style }};
    {% endif %}
    {% if module.styles.button.hover.background.color.color %}
      background-color: rgba({{ module.styles.button.hover.background.color.color|convert_rgb }}, {{ module.styles.button.hover.background.color.opacity / 100 }});
    {% endif %}
  }

  {% if module.add_icon && module.icon.icon && module.styles.button.text.font.color %}
    .button:hover svg,
    .button:focus svg {
      fill: {{ module.styles.button.hover.text.font.color }};
    }
  {% endif %}

  .button:active {
    {% if module.styles.button.hover.background.color.color %}
      background-color: rgba({{ color_variant(module.styles.button.hover.background.color.color, 80)|convert_rgb }}, {{ module.styles.button.hover.background.color.opacity / 100 }});
    {% endif %}
    {{ module.styles.button.hover.border.border.css }}
    {% if module.styles.button.hover.border.border.top.color %}
      border-color: {{ color_variant(module.styles.button.hover.border.border.top.color, 80) }};
    {% endif %}
    {% if module.styles.button.hover.text.font.color %}
      color: {{ module.styles.button.hover.text.font.color }};
    {% endif %}
    {% if module.styles.button.hover.text.font.size %}
      font-size: {{ module.styles.button.hover.text.font.size ~ module.styles.button.hover.text.font.size_unit }};
    {% endif %}
    {% if module.styles.button.hover.text.font.style %}
      {{ module.styles.button.hover.text.font.style }};
    {% endif %}
  }

  {% if module.add_icon && module.icon.icon && module.styles.button.text.font.color %}
    .button:active svg {
      fill: {{ module.styles.button.hover.text.font.color }};
    }
  {% endif %}

  /* Card */

  .offer-card {
    {% if module.styles.card.background.color %}
      background-color: rgba({{ module.styles.card.background.color.color|convert_rgb }}, {{ module.styles.card.background.color.opacity / 100 }});
    {% endif %}
    {{ module.styles.card.border.border.css }}
    {% if module.styles.card.corner.radius %}
      border-radius: {{ module.styles.card.corner.radius ~ 'px' }};
    {% endif %}
    {% if module.styles.card.height.min_height %}
      min-height: {{ module.styles.card.height.min_height ~ 'px' }};
    {% endif %}
    {{ module.styles.card.spacing.spacing.css }}
    {% if module.styles.card.alignment.alignment.text_align %}
      text-align: {{ module.styles.card.alignment.alignment.text_align }};
    {% endif %}
  }

{% end_scope_css %}
</style>

{# Sets CSS classes based on style field options #}

{% if module.styles.icon.presets.icon_size == 'small' %}
  {% set icon_size = 'icon--small' %}
{% elif module.styles.icon.presets.icon_size == 'large' %}
  {% set icon_size = 'icon--large' %}
{% endif %}

{% if module.styles.icon.presets.icon_color == 'light' %}
  {% set icon_color = 'icon--light' %}
{% endif %}

{% if module.styles.icon.presets.icon_shape == 'square' %}
  {% set icon_shape = 'icon--square' %}
{% endif %}

{% if module.styles.button.presets.button_style == 'secondary' %}
  {% set button_style = 'button--secondary' %}
{% elif module.styles.button.presets.button_style == 'simple' %}
  {% set button_style = 'button--simple' %}
{% endif %}

{% if module.styles.button.presets.button_size == 'small' %}
  {% set button_size = 'button--small' %}
{% elif module.styles.button.presets.button_size == 'large' %}
  {% set button_size = 'button--large' %}
{% endif %}

{% if module.button.icon.position == 'right' %}
  {% set icon_position = 'button--icon-right' %}
{% endif %}

{% if module.styles.card.presets.card_style == 'dark' %}
  {% set card_style = 'card--dark' %}
{% elif module.styles.card.presets.card_style == 'light' %}
  {% set card_style = 'card--light' %}
{% endif %}

{# Offer card #}

<section class="offer-card card {{ card_style }}">

  {# Icon #}

  <div class="offer-card__icon-wrapper">
    <span class="{{ icon_size }} {{ icon_color }} {{ icon_shape }}">
      {% icon
        extra_classes='offer-card__icon icon'
        name='{{ module.icon.icon.name }}'
        purpose='{{ module.icon.accessibility_options.purpose }}'
        style='{{ module.icon.icon.type }}'
        title='{{ module.icon.accessibility_options.title }}'
        unicode='{{ module.icon.icon.unicode }}'
      %}
    </span>
  </div>

  {# Content #}

  <div class="offer-card__content">
    {{ module.content.content }}
  </div>

  {# Button #}

  {# Sets attributes used for the link field #}

  {% set href = module.button.button_link.url.href %}
  {% if module.button.button_link.url.type is equalto 'EMAIL_ADDRESS' %}
    {% set href = 'mailto:' + href %}
  {% endif %}
  {% set rel = [] %}
  {% if module.button.button_link.no_follow %}
    {% do rel.append('nofollow') %}
  {% endif %}
  {% if module.button.button_link.open_in_new_tab %}
    {% do rel.append('noopener') %}
  {% endif %}

  <div class="offer-card__button-wrapper">
    <a href="{{ href }}" class="button {{ button_style }} {{ button_size }} {{ icon_position }}"
      {% if module.button.button_link.open_in_new_tab %}target="_blank"{% endif %}
      {% if rel %}rel="{{ rel|join(" ") }}"{% endif %}
    >
      {% if module.button.add_icon && module.button.icon.icon %}
        {% icon
          extra_classes='button__icon'
          name='{{ module.button.icon.icon.name }}'
          purpose='decorative'
          style='{{ module.button.icon.icon.type }}'
          unicode='{{ module.button.icon.icon.unicode }}'
        %}
      {% endif %}
      {{ module.button.button_text }}
    </a>
  </div>

</section>
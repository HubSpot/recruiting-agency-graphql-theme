#  label: "Featured Roles"
#  description: "Query to show featured roles on a page that is showing role details. Relies on the template using a data query that retrieves a single role."
#  $limit: {{ module.roles_to_show || 3 }}
#  $department: {{ data_query.data.CRM.p_role.department || '' }}
#  $company: "{{ data_query.data.CRM.p_role.associations.company_collection__role_to_company.items[0].name || '' }}"
#  $skipId: "{{ data_query.data.CRM.p_role._metadata.id }}"
query featured_roles(
  $limit: Int, 
  $department: String,
  $company: String,
  $skipId: Number)
{
  CRM {
    company_collection(filter: {name_eq: $company}) {
      items {
        associations {
          p_role_collection__role_to_company(limit: $limit, filter: {department_eq: $department, hs_object_id_neq: $skipId}) {
            items {
              _metadata { 
                id
              }
              department
              description
              location
              role_identifier
              title
              status
            }
            hasMore
            limit
            offset
            total
          }
        }
        name
      }
    }
  }
}
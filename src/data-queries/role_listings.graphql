"""
  label: "Role Listings"
  description: "Role listings query for Recruiting Agency case study."
"""
query role_listings(
  $offset: Int = {{ request.query_dict.location || 0 }}, 
  $limit: Int = {{ request.query_dict.limit Int || 5 }}, 
  $location: String = "{{ request.query_dict.location || ''}}", 
  $department: String = "{{ request.query_dict.department || ''}}") {
  CRM {
    p_role_collection(limit: $limit, offset: $offset, filter: {location_eq: $location, department_eq: $department}) {
      items {
        associations {
          company_collection__role_to_company {
            items {
              name
            }
          }
        }
        department
        description
        id
        location
        role_identifier
        title
        status
      }
      hasMore
      limit
      offset
      total
    }
  }
}
